# Using Cryto to Avoid Database Writes

This repo demonstrates using cryptography to _guarantee_ something instead of
sub-optimally writing to a database. See the use cases below.

### Case Study: Creating New Accounts with Verified Emails

Often we want to verify the email of new users so we write a user to the
DB with some kind of "marking" they are unverified (i.e. a verified boolean
table column). Instead this repo creates links for account creation that
uses a cryptographic signature so that we know the link was generated by the
system without any persistence on a user (and none of the associated complexity
of dealing with actions taken by an unverified user).

### Case Study: Resetting a User's Password

When we want to reset a user's password (like a forgot password functionality), we might
send the user a special link in their email. One way to achieve this might be to write in
the database an entity consisting of something like:

- `resetToken` (secret)
- `userId` (for which user is this reset for?)
- `expirationTime` (when does this expire?)

Instead of doing this and managing these entities (by periodically deleting them or
deleting them when the user logs in), we can place all the information we need in the URL
with the HMAC token to verify everything we need.
